# DOM: Document Object Model

2008-04-15 13:12:45 | 2012-01-09 23:31:47

---

Teknik bir sorun sonucu makalenin önemli kısımlarını kaybettik. En kısa zamanda çeşitli eklemelerle yeniden yayımlayacağım. Şimdilik kurtardığım kısımları yayımlıyorum.Başlarken DOM(Document Object Model/Belge Nesne Modeli) konusuna girmeden önce yazı boyunca sıkça kullanacağımız kelimeler hakkında birkaç tanım yapıp, İngilizce karşılıklarını da vermekte fayda görüyorum.Düğüm(Node): Geçerli her HTML ve XML belgesindeki element, nitelik, metin düğümü(text node) hatta boşluk ve sekme karakterleri(whitespace) bile W3C DOM tarafından düğüm olarak kabul edilir.Düğüm ağacı(Node tree): Belgedeki düğümlerin kullanım hiyerarşisine göre sıralanmasına denir.Örnek 1: Basit bir düğüm ağacı    &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Sayfa başlığımız  &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;class=selam&gt;  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Deneme mesajımız. &nbsp;&nbsp; &nbsp; Yukarıdaki örneğin düğüm hiyerarşisiyse aşağıdaki gibidir:   document  -   - - (whitespace)  - -   - - (whitespace)  - -   - - - Sayfa başlığımız  - - - (whitespace)  - -   - - (whitespace)  - - - - - - (whitespace)  - - - - Deneme  - - - - -   - - - - - - mesajımız.  - - - - - (whitespace)Burada unutulmaması gereken ana nokta, Inrernet Explorer&rsquo;ın boşluk ve sekme karakterlerini yok saymasıdır ki bu da JavaScript ile düğümlere erişirken tarayıcılar arasında yaşanan problemlerin en önemli sebeplerinden birini oluşturur.İsterseniz, düğüm özellikleri(node properties) ve JavaScript ile işlem yapmaya geçmeden önce, DOM tarihçesine göz atalım.Nasıl doğdu?DOM 0Nesne Modeli kavramının ilk versiyonudur. Başlarda sadece Netscape Navigator tarafından tam olarak destekleniyordu. En büyük yeniliği, JavaScript ile sayfadaki HTML elementlerine erişmeye izin vermesiydi. Daha sonra Microsoft, Internet Explorer 3&rsquo;te DOM 0&rsquo;ı aynen destekledi. Tabii daha sonraları bu barış havasından pek eser kalmadı :)DOM 0+ImagesEn önemli değişikliği, Netscape Navigator 3.0 ile birlikte sunulan Image nesnesiydi. Başlangıçta sadece src niteliği kullanılabilir olsa da o yıllarda geliştiriciler için yeterli olsa gerek :) Ama Microsoft, Image nesnesini desteklemeyerek bugün &ldquo;Tarayıcı Savaşları&rdquo;* adını verdiğimiz, tarayıcılar arasındaki uyumsuzlukların temelini attı.Tarayıcı savaşları başlıyor!Netscape CephesiNetscape Navigator 4.0 sürümüyle birlikte, olay yönetimi tamamen geliştiricinin kontrolü altına girdi. Olay yönetiminin temel çalışma prensibi; olayın tetiklendiği en üst noktadan başlayarak, gerçek nedeniyle doğru yayılması şeklinde açıklanabilir(bkz. Örnek 1).Netscape Navigator 4.0&rsquo;ın bir diğer yeniliği de katman mimarisi ve  HTML elementiydi. Bu yeni element, sayfayı farklı katmanlara ayırmaya ve gerektiğinde nesneleri farklı katmanlar arasına taşımayı sağlıyordu.Microsoft CephesiMicrosoft, Internet Explorer sürümüyle birlikte tüm HTML elementlerine erişim imkanı sağladı. Ayrıca, bana göre yeni sürümdeki en büyük yenilik CSS için eklenen style özelliğidir. Bugün gelinen noktada, en çok kullanılan özelliklerden biri olduğunu söylemek yanlış olmaz.Tüm bu yeniliklerin yanında, Microsoft&rsquo;un Netscape&rsquo;in olay yönetimine getirdiği farklı bakış açısı, tarayıcılar arası uyum sorunlarını farklı noktaya taşıdı. Internet Explorer 4, olay kabarcıkları(event bubbling) denilen, gerçek olay nedeninden başlayarak window nesnesine ulaşan bir işleyişe sahipti.Bu farklılığın ortaya çıkardığı en büyük problem, olay yakalamada yaşanan farklılıklardı. Ancak günümüzde, modern tarayıcılarda kendi nesne modellerine ek olarak, W3C DOM level 2&rsquo;nin de desteklenmesiyle büyük oranda çözülmüştür.Son yenilik ise, halen diğer modern tarayıcılar ve W3C DOM tarafından desteklenmeyen filtrelerdir. Bu filtreler, başta saydamlık olmak üzere pek çok görsel değişikliğe olanak sağlamaktaydı.Modern tarayıcılardaki son durumTarayıcılar arasında halen devam eden karışıklıklara rağmen, modern tarayıcılar kendi nesne modelleri yanı sıra, W3C DOMu da destekleyerek geliştiricilerin işini bir nebze de olsa kolaylaştırmaya başladı. Buna rağmen örneğin, Microsoft Internet Explorer ve Mozilla Firefoxta JavaScript ile herhangi bir yazıyı kopyalamak için iki farklı kod yazmak zorunda kalıyoruz.W3C DOMW3C DOM, yukarıdaki paragraflarda da anlattığımız tarayıcılar arası farklılıkları ortadan kaldırmak amacıyla, önde gelen tarayıcı üreticilerinin de desteğiyle geliştirilmeye başlanmıştır. W3C DOM Level 2, tüm tarayıcılar tarafından desteklenen en güncel sürümdür. W3C DOM Level 3, halen geliştirilme aşamasındadır. Başta olay yönetimi olmak üzere birçok konuda büyük değişikler yaşanacaktır. HTML 5in tamamlanmasıyla ortaya çıkışının fazla zaman almayacağını umuyorum :)Düğümlere erişmekDüğümlere erişmek ve yönetmek için kullanacağımız üç ana JavaScript metodu vardır:  getElementById() getElementsByTagName() getElementsByName()getElementById()  Sözdizimi: document.getElementById(herhangiBirID);getElementById() metodu, belirtilen IDnin kapsadığı elementleri döndürür. Ancak bu metod XMLde çalışmaz. XML DOM konusuna daha sonra &ndash;umarım 2008 içinde!- ayrı bir makalede değinmeyi düşünüyorum.Örnek 2: id=paragraf&gt;Bu paragraf çok şey anlatıyor.  =text/javascript>    var oDiv = document.getElementById(paragraf);    document.write(oDiv.firstChild.innerHTML);// --> // --&gt; getElementsByTagName()  Sözdizimi: document.getElementsByTagName(herhangiBirHTMLElementi);Örnek 3:  document.getElementsByTagName(a);  Belge içerisindeki tüm  elementlerini verir.  document.getElementById(herhangiBirID).document.getElementsByTagName(img);  id niteliğinin değeri herhangiBirID olan elementin düğümleri içindeki tüm  elementlerini verir.getElementsByName()  Sözdizimi: document.getElementsByName(herhangiBirIsim);Örnek 4:  document.getElementsByName(baslik);  name niteliğinin değeri baslik olan elementleri verir.Düğümler arasında dolaşmak: firstChild, lastChild, parentNodefirstChildDüğümün ilk çocuk düğümüne erişir.  Sözdizimi: document.getElementById(herhangiBirID).firstChild;Örnek 5:   href=# id=deneme&gt;Link 1 =text/javascript>    var oDiv = document.getElementById(deneme);    document.write(oDiv.firstChild.nodeValue);// -->// --&gt;lastChild  Sözdizimi: document.getElemementById(&ldquo;herhangiBirID&rdquo;).lastChild;Örnek 3:  id=paragraf&gt;href=#&gt;Link 1href=#&gt;Link 2 =text/javascript>    var oDiv = document.getElementById(paragraf);    document.write(oDiv.lastChild.firstChild.nodeValue);// --> // --&gt; parentNodeSon örnekten yola çıkarak açıklamaya çalışırsam, &nbsp; elementi tüm çocuk(child) elementların ana(parent) düğümüdür.Düğümlerin değerlerini almak: nodeValue  Sözdizimi: document.getElemementById(&ldquo;herhangiBirID&rdquo;).lastChild.nodeValue;Örnek 4:  =text/javascript>    var deger = document.getElementById(“nav”).firstChild.nodeValue;    document.write(deger);// --> // --&gt; Herhangi bir elementin ilk düğümünü silmek: removeChild  Sözdizimi: var o = document.getElementById(&ldquo;nav&rdquo;); o.parentNode.removeChild(o);Örnek 5:  id=paragraf2&gt;href=#&gt;Link 1href=#&gt;Link 2 =text/javascript>    var oDiv = document.getElementById(paragraf2);    document.write(oDiv.parentNode.removeChild(oDiv));// --> // --&gt; Bir çocuk düğümü başka bir çocuk düğümle değiştirmek: replaceChildÖrnek 6:   &nbsp;&nbsp; &nbsp;That is not dead &nbsp;&nbsp; &nbsp;Which can eternal lie &nbsp;&nbsp; &nbsp;Yet with strange aeons &nbsp;&nbsp; &nbsp;Even death may die &nbsp;&nbsp; &nbsp;id=yazar&gt;H. P. Lovecraft  type=button onclick=fnReplace()&gt;Değiştir =text/javascript>    function fnReplace() {        var o = document.createElement(strong);        var oIcerik = document.createTextNode(Steve Harris);        o.appendChild(oIcerik);        var o2 = document.getElementById(yazar);        var anneElement = o2.parentNode;        anneElement.replaceChild(o, o2);    }// --> // --&gt; Düğüm bilgilerini almak: nodeName, nodeTypenodeNameGeçerli düğümün adını döndürür. Geçerli&nbsp; düğüm element ise, elementin tipini döndürür. Nitelik ise, nitelik adını döndürür.nodeTypeGeçerli düğümün türünü sayısal olarak döndürür.  1 &ndash; Element 2 &ndash; Attribute 3 &ndash; Text 4 &ndash; Comment 5 &ndash; DocumentÇocuk düğümleri(child nodes) almak: childNodes  İşaret edilen düğümün eğer varsa, çocuk düğümlerini bir dizide depolar.Düğümler arası gezinti: nextSibling, previousSiblingnextSibling  Geçerli düğümden bir sonrakine referans verir.previousSibling  Geçerli düğümün bir öncekine referans verir.Yeni bir çocuk düğüm eklemek: appendChildSöz dizimi: document.getElementById(&ldquo;birID&rdquo;).appendChild(oDugum);Örnek 7:   type=text name=frmAlbum id=idAlbum value= /&gt;  type=button onclick=fnAlbumEkle()&gt;Ekle  id=liste&gt; &nbsp;&nbsp; &nbsp;Iron Maiden &nbsp;&nbsp; &nbsp;Killers  =text/javascript>     function fnAlbumEkle() {          var strAlbum = document.getElementById(idAlbum).value;          var o = document.createElement(LI);          o.innerHTML = strAlbum;          document.getElementById(liste).appendChild(o);     }// --> // --&gt; Bir düğümün niteliklerine erişmek: getAttributeNode  Sözdizimi: element.getAttributeNode(nitelik);Örnek 8:  id=nitelikAdimiz class=uyari&gt; &nbsp;&nbsp; &nbsp;Metallica 3. kez Türkiyede konser verecek! =text/javascript>    var o = document.getElementById(nitelikAdimiz);    var nitelik = o.getAttributeNode(class);    document.write(nitelik.value);// --> // --&gt;   Bir düğüme nitelik atamak: setAttributeNode  Sözdizimi: element.setAttributeNode(nitelik);  Örnek 9:  id=nitelikAdimiz3 class=uyari&gt; &nbsp;&nbsp; &nbsp;That is not dead &nbsp;&nbsp; &nbsp;Which can eternal lie &nbsp;&nbsp; &nbsp;Yet with strange aeons &nbsp;&nbsp; &nbsp;Even death may die &nbsp;&nbsp; &nbsp;H. P. Lovecraft id=nitelikAdimiz4&gt; &nbsp;&nbsp; &nbsp;That is not dead &nbsp;&nbsp; &nbsp;Which can eternal lie &nbsp;&nbsp; &nbsp;Yet with strange aeons &nbsp;&nbsp; &nbsp;Even death may die &nbsp;&nbsp; &nbsp;H. P. Lovecraft  type=button onclick=fnEkle()&gt;class=uyari ekle =text/javascript>    function fnEkle() {        var o1 = document.getElementById(nitelikAdimiz3);         var o2 = document.getElementById(nitelikAdimiz4);         var nitelikAta = o1.getAttributeNode(class);         o1.removeAttributeNode(nitelikAta);        o2.setAttributeNode(nitelikAta);     }// --> // --&gt;   Bir nitelik düğümünü silmek: removeAttributeNode  Örnek 10:  id=nitelikAdimiz2 class=uyari&gt; &nbsp;&nbsp; &nbsp;That is not dead &nbsp;&nbsp; &nbsp;Which can eternal lie &nbsp;&nbsp; &nbsp;Yet with strange aeons &nbsp;&nbsp; &nbsp;Even death may die &nbsp;&nbsp; &nbsp;H. P. Lovecraft  type=button onclick=fnNodeKaldir()&gt;class=uyari kaldır =text/javascript>    function fnNodeKaldir() {        var o = document.getElementById(nitelikAdimiz2);        var nitelik = o.getAttributeNode(class);        o.removeAttributeNode(nitelik);    }// --> // --&gt; AraçlarDOM Inspector(DOMi)Mozilla Firefox ile birlikte gelen DOM Inspector aracı başlangıç için oldukça işe yarar. Araçlar &gt; DOM Inspector ya da CTRL + SHIFT + I kısayolunu kullanarak aracı başlatabilirsiniz. Arayüzü Firefox&rsquo;a benzer olduğu için neyin ne olduğundan bahsetmiyorum.Yazımız içerisinde Internet Explorer&rsquo;ın boşluk ve sekme karakterlerini düğüm olarak yorumlamadığını söylemiştik. Arzu ederseniz View &gt; Show Whitespace Nodes tikini kaldırarak, DOMi&rsquo;ın aynı şekilde yorumlamasını sağlayabilirsiniz.FirebugBir tarayıcı için yazılan eklentide bile kalitenin ne kadar yukarılara çekilebileceğinin kanıtıdır Joe Hewitt amca tarafından yazılan Firebug. Eklentiyi buradan kurabilir ve F12 tuşuyla aktive edebilirsiniz. Konsolu açtıktan sonra geriye kalan tek şey Inspect butonuna tıklamak.AardvarkFirebug gibi bir başka Firefox eklentisi daha. Firebug&rsquo;a göre biraz daha kullanışlı olduğunu söyleyebilirim. Kurduktan sonra, kullanmak istediğiniz sayfada sağ tıklayıp Start Aardvark diyerek çalışmaya başlayabilirsiniz. Özellikle ana düğüm ve çocuk düğümlerle çalışırken işinizi epey kolaylaştırıyor.Firebug LiteFirebug&rsquo;ın avantajlarından Internet Explorer, Opera ve Safari gibi popüler tarayıcılarda da yararlanmak için harika bir çözüm.IE Developer ToolsFirefox&rsquo;un DOM Inspector&rsquo;ının Internep Explorer 8&rsquo;deki karşılığı diyebiliriz kısaca. Henüz geliştirilme aşamasında olsa da benim kullandığım kısıtlı süre boyunca DOM Inspector&rsquo;a göre daha kullanışlı olduğunu söyleyebilirim.Son sözlerHer zamanki gibi işe koyulma tarihimle tamamlamam arasında epey süre geçti. Bu nedenle gözden kaçırdığım, yazım şeklinden kaynaklı düşük cümleler ve yanlış bilgiler olabilir. Eğer böyle bir sorunla karşılaşırsanız(ya da eklemek istedikleriniz varsa) lütfen bunu yazıya yorum yazarak ya da berker.peksag at gmail.com e-posta adresini kullanarak bildirmekten çekinmeyin.Yararlanılan kaynaklar  Inside JavaScript &ndash; Steven Holzner (New Riders Publishing, 2003) http://en.wikipedia.org/wiki/Document_Object_Model http://developer.mozilla.org/en/docs/Introduction_to_DOM_Inspector http://developer.mozilla.org/en/docs/DOM:element.setAttributeNode

<!-- meta: archive(1) active(0) -->
